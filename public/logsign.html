<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login/SignUp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-signin-scope" content="profile email">
  <meta name="google-signin-client_id" content="586635191861-jr2ddas44f71pul4dc2su091lutgabsv.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <link rel="stylesheet" href="stylesheets/style.css">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-pink.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://apis.google.com/js/plus.js?onload=appStart"></script>
  <script src="javascripts/main.js"></script>
</head>

<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">

  <!-- TOP MENU -->
  <header>
    <div class="letohLogo"><a href="/">Letoh</a></div>
    <input type="text" id="mainSearch">
    <button id="mainMenu" class="mdl-button mdl-js-button mdl-button--icon">
      <i class="material-icons">more_vert</i>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" data-mdl-for="mainMenu">
      <li class="mdl-menu__item"><a href="hotelManage.html">Manager Settings</a></li>
      <li class="mdl-menu__item mdl-menu__item--full-bleed-divider"><a href="accountPage.html">User Settings</a></li>
    </ul>
  </header>

  <main>
    <div id="content">

      <div class="middlecontent">

        <!-- Left Input Box -->
        <div class="input-box-left mdl-card mdl-shadow--2dp">
          <h5>Login</h5>
          <form action="/login" method="post" class="InputForms">
            Email:<br>
            <input type="text" name="email" class="inputfield"><br><br>
            Password:<br>
            <input type="password" name="password" class="inputfield"><br>
            <br>

          Social Media:<br>
          <img alt="social" src="images/fb.png" class="socialimage">
          <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
          <br>
          <br>
          Complete Form?
          <input type="submit">
          </form>
        </div>
        <!-- Right Input Box -->
        <div class="input-box-right mdl-card mdl-shadow--2dp">
          <h5>Signup</h5>
          <form action="/signup" method="post" class="InputForms">
           <div class="nameloginput">
             <div class="nameinputsection">
               First Name:<br>
               <input type="text" name="firstname" class="nameinput"><br><br>
             </div>
             <div class="nameinputsection">
               Last Name:<br>
               <input type="text" name="lastname" class="nameinput"><br><br>
             </div>
           </div>
           Email:<br>
           <input type="text" name="email" class="inputfield"><br><br>
           Password:<br>
           <input type="password" name="password" class="inputfield"><br>

          <div class="nameinputsection">
            Complete Form?
            <input type="submit">
          </div>
        </form>

        </div>

      </div>
      
      <div class="middleborder mdl-shadow--2dp">
        <p>
          Are you a hotel owner? If so click <button onclick="test()" class="clickhotel">Here</button>
        </p>

      </div>

    </div>

    <footer>
      <p>Feedback</p>
      <p><a href="privacy.html" target="_blank">Privacy Policy</a></p>
      <p><a href="terms.html" target="_blank">Terms of Use</a></p>
      <p>Â© 2018 Letoh, Inc. All rights reserved</p>
    </footer>
  </main>

</div>

<script>
  var ishotellogin = false;
  if(ishotellogin == false){
    $('.hotellogname').hide();
    $('.nameloginput').show();
  } else {
    $('.hotellogname').show();
    $('.nameloginput').hide();
  }
  function test() {
    if(ishotellogin == true){
      ishotellogin = false;
    } else {
      ishotellogin = true;
    }
    if(ishotellogin == false){
      $('.hotellogname').hide();
      $('.nameloginput').show();
    } else {
      $('.hotellogname').show();
      $('.nameloginput').hide();
    }
  }

  function onSignIn(googleUser) {
    // Useful data for your client-side scripts:
    var profile = googleUser.getBasicProfile();
    console.log("ID: " + profile.getId()); // Don't send this directly to your server!
    console.log('Full Name: ' + profile.getName());
    console.log('Given Name: ' + profile.getGivenName());
    console.log('Family Name: ' + profile.getFamilyName());
    console.log("Image URL: " + profile.getImageUrl());
    console.log("Email: " + profile.getEmail());

    // The ID token you need to pass to your backend:
    var id_token = googleUser.getAuthResponse().id_token;
    console.log("ID Token: " + id_token);
    getUserInfo({'idtoken': id_token});
  };

  function getUserInfo(params) {
    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", "/login", true);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send(JSON.stringify(params));
  }

</script>

</body>
</html>
